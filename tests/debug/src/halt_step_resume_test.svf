// Check jtag id
SDR 32 TDO(1002ac05);
// Activating DM
SIR 5 TDI(11);
SDR 41 TDI(4000000006);
// Read DMStatus, compare bottom 8 bits to 0xa3
SDR 41 TDI(4400000001);
SDR 41 TDO(28c) MASK(3ff);
// Reset hart
SDR 41 TDI(400000000e);
SDR 41 TDI(4000000006);
SDR 41 TDI(4040000006);
// Halt hart
SDR 41 TDI(4200000006);
SDR 41 TDI(4000000006);
SDR 41 TDI(4400000001);
SDR 41 TDO(c00) MASK(c03);
// Step
SDR 41 TDI(1000000012);
SDR 41 TDI(1400000002);
SDR 41 TDI(5c00cc1ec2);
RUNTEST 64;
SDR 41 TDI(4100000006);
SDR 41 TDI(1000000002);
SDR 41 TDI(1400000002);
SDR 41 TDI(5c00cc1ec2);
RUNTEST 64;
// Idle for 50 cycles
RUNTEST 50;
// Step
SDR 41 TDI(1000000012);
SDR 41 TDI(1400000002);
SDR 41 TDI(5c00cc1ec2);
RUNTEST 64;
SDR 41 TDI(4100000006);
SDR 41 TDI(1000000002);
SDR 41 TDI(1400000002);
SDR 41 TDI(5c00cc1ec2);
RUNTEST 64;
// Resume
SDR 41 TDI(4100000006);
SDR 41 TDI(4400000001);
SDR 41 TDO(c0000) MASK(c0003);
